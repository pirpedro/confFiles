#!/bin/bash
#shellcheck source=ext/functions.sh
source $MY_CONFIG_EXT/functions.sh

case "$1" in
install)
  files=( ~/.bashrc ~/.bash_profile ~/.myenv/config.sh \
              ~/.myenv/aliases.sh ~/.myenv/path.sh )
  [ -d ~/.myenv ] || mkdir ~/.myenv
  for file in ${files[*]}; do
    [ -f "$file" ] || { touch "$file"; chmod +x "$file"; }
  done
  unset file
  [ -f ~/.bash_profile ] || touch ~/.bash_profile
  [ -f ~/.bashrc ] || touch ~/.bashrc
  if ! grep -xq "$(my_resource 'profile' | head -n1)" ~/.bash_profile; then
      my_resource "profile" >> ~/.bash_profile
  fi
  if ! grep -xq "$(my_resource 'my-project-wrap-function' | head -n1)" ~/.bash_profile; then
      my_resource "my-project-wrap-function" >> ~/.bash_profile
  fi

  if ! grep -xq "$(my_resource 'profile' | head -n1)" ~/.bashrc; then
      my_resource "profile" >> ~/.bashrc
  fi
  if ! grep -xq "$(my_resource 'my-project-wrap-function' | head -n1)" ~/.bashrc; then
      my_resource "my-project-wrap-function" >> ~/.bashrc
  fi
  ;;
remove)
  ;;
esac
